macro(get_dir_name var)
  get_filename_component(${var} ${CMAKE_CURRENT_SOURCE_DIR} NAME)
endmacro()

function(add_c_solution target interface)
  add_library(${target} ${ARGN})
  add_library(${target}-interface ${interface})
  target_link_libraries(${target}-interface PRIVATE ${target})
endfunction()

function(add_cpp_solution target)
  add_library(${target} ${ARGN})
  set_property(TARGET ${target} PROPERTY CXX_STANDARD 20)
endfunction()

function(add_problem_test target)
  add_executable(${target} ${ARGN})
  set_property(TARGET ${target} PROPERTY CXX_STANDARD 20)
  target_link_libraries(${target} PRIVATE Catch2::Catch2WithMain ${solutions})
  catch_discover_tests(${target})
endfunction()

file(GLOB problems LIST_DIRECTORIES true "*")
foreach(problem ${problems})
  if(IS_DIRECTORY ${problem})
    add_subdirectory(${problem})
  endif()
endforeach()
